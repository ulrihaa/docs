# Сеть в {{ dataproc-name }}

Все подкластеры кластера находятся в одной [облачной сети](../../vpc/concepts/network.md), все хосты каждого подкластера — в определенной подсети этой сети.

Для любого подкластера при создании кластера может быть включен публичный доступ, чтобы подключаться к его хостам через интернет. Подключение к хостам подкластеров без публичного доступа производится только с виртуальных машин {{ yandex-cloud }}, расположенных в той же облачной сети, что и кластер.

## Адреса хостов в кластере {#hostname}

При создании хоста в подкластере {{ dataproc-name }} генерирует для него FQDN и IP-адрес. Их можно использовать для доступа к хосту в рамках одной облачной сети.

IP-адрес хоста может меняться в ходе эксплуатации, но FQDN хоста не меняется.

О том, как получить FQDN хоста, см. [инструкцию](../operations/connect.md#fqdn).

{% note warning %}

Когда вы уменьшаете количество хостов в подкластере, сервис самостоятельно выбирает хосты, которые будут удалены. FQDN удаленных хостов перестают работать.

{% endnote %}

### Назначение сетевых псевдонимов хостов {#fqdn-reconnect}

Чтобы поддерживать внешний сетевой доступ к сервисам {{ dataproc-name }}, создайте сетевой псевдоним (запись CNAME) в сервисе {{ dns-full-name }}, указывающий на актуальное имя мастер-хоста кластера {{ dataproc-name }}.

Для перенастройки внешних подключений при повторном создании кластера или переключении рабочей нагрузки на другой кластер достаточно изменить созданную CNAME-запись.

Пример настройки см. в разделе [{#T}](../tutorials/reconnect-network.md).

## Группы безопасности {#security-groups}

Для групп безопасности действует принцип «весь трафик, который не разрешен, запрещен». Если в настройках групп безопасности нет необходимых правил, то подключиться к кластеру будет невозможно. Также не будет работать обмен данными между подкластерами, кластером и промежуточной виртуальной машиной, используемой для [перенаправления портов](interfaces.md).

Например, пусть для подключения к кластеру используется ВМ, находящаяся в подсети 10.128.0.0/16. Если в правилах группы безопасности указана только подсеть 10.133.0.0/24, подключиться к кластеру не удастся. Также не получится подключиться к кластеру с ВМ, находящейся в подсети 10.128.0.0/16, для которой не указаны разрешения для нужных портов.

Перед созданием кластера необходимо создать и настроить группы безопасности таким образом, чтобы был разрешен служебный трафик между хостами кластера. Подробнее см. в разделе [{#T}](../operations/cluster-create.md).
